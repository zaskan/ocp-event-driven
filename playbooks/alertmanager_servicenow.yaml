---
- name: Pass parameters from Alertmanager to Servicenow
  hosts: localhost
  gather_facts: false

  tasks:

    - name: Perform a Servicenow API Call
      ansible.builtin.include_role:
        name: servicenow
      vars:
        servicenow_action: "{{ payload.labels.snow_action }}"
        servicenow_incident_title: "{{ payload.labels.alertname }}"
        servicenow_incident_description: "{{ payload.labels.description }}{{ payload.labels.summary }}"

---
- name: ServiceNow EDA Listener
  hosts: localhost

  sources:
     - name: Check new Incidents
       cloin.eda.snow_records:
         instance: "{{ snow_instance_host }}"
         username: "{{ snow_instance_username }}"
         password: "{{ snow_instance_password }}"
         table: incident
         interval: 1

{% raw %}
  rules:
    - name: Extend PVC
      condition: event.short_description == "PVCUsageHigh"
      action:
        run_workflow_template:
          name: "[WF] Extend Openshift Physical Volume"
          organization: Default
          job_args:
            extra_vars:
              incident_id: "{{ event.number }}"
              description: "{{ event.description }}"
{% endraw %}
